<?xml version="1.0"?>
<odoo>

	<record id="view_project_task_template_form" model="ir.ui.view">
        <field name="name">project.task.template.form</field>
        <field name="model">project.task.template</field>
        <field eval="2" name="priority"/>
        <field name="arch" type="xml">
            <form string="Task template">
                <sheet string="Task template">
	                <div class="oe_button_box" name="button_box">
	                    <button name="toggle_active" type="object" groups="base.group_user"
	                            class="oe_stat_button" icon="fa-archive">
	                        <field name="active" widget="boolean_button"
	                            options='{"terminology": "archive"}'/>
	                    </button>
	                </div>
	                <div class="oe_title pr-0">
	                    <h1 class="d-flex flex-row justify-content-between">
	                        <field name="name" class="o_task_name text-truncate" placeholder="Task Title..."/>
	                    </h1>
	                </div>
	                <group>
	                	<group string="Working Time">
                            <field name="planned_hours" widget="float_time"/>
                            <field name="subtask_planned_hours" widget="float_time"/>
                        </group>
	                    
	                    <group>
	                    	<field name="parent_id" attrs="{'invisible':[('parent_id','=',False)]}"/>
	                        <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
	                    </group>
	                </group>
	                <group col="4">
	                    	<field name="create_uid"/>
	                        <field name="write_uid"/>
	                        <field name="create_date"/>
	                        <field name="write_date"/>
	                        <field name="message_partner_ids" widget="many2many_tags"/>
	                    </group>
	                <notebook>
	                    <page name="description_page" string="Description">
	                        <field name="description" type="html"/>
	                        <div class="oe_clear"/>
	                    </page>
	                    <page name="sub_tasks_template" string="Subtasks" attrs="{'invisible':[('parent_id','!=',False)]}">
	                    	<field name="child_ids" context="{'default_parent_id':active_id }">
	                    		<tree string="Subtasks">
	                    			<field name="name"/>
	                    			<field name="description"/>
	                    			<field name="planned_hours" widget="float_time"/>
	                    			<field name="parent_id" invisible="1"/>
	                    		</tree>
	                    	</field>
	                    </page>
	                    <page name="product_template" string="Related Articles">
	                    	<field name="product_ids" readonly="1">
	                    		<tree>
	                    			<field name="default_code"/>
	                    			<field name="name"/>
	                    			<field name="categ_id"/>
	                    			<field name="type"/>
	                    		</tree>
	                    	</field>
	                    </page>
	                </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
            </form>
        </field>
	</record>
	
  	<record id="view_project_task_template_tree" model="ir.ui.view">
		  <field name="name">project.task.template.tree</field>
		  <field name="model">project.task.template</field>
		  <field eval="8" name="priority"/>
		  <field name="arch" type="xml">
		      	<tree string="Task template">
		      		<field name="name"/>
		      		<field name="planned_hours"/>
		      		<field name="subtask_planned_hours"/>
		      		<field name="parent_id"/>
		      	</tree>
		  </field>
  	</record>
  	
  	<record id="view_task_template_search_form" model="ir.ui.view">
	   <field name="name">project.task.template.search.form</field>
	   <field name="model">project.task.template</field>
	   <field name="arch" type="xml">
	       <search string="Tasks template">
	           <field name="name" string="Tasks"/>
	           <field name="tag_ids"/>
	           <field name="parent_id" string="Parent task"/>
	           <filter string="My Followed Tasks template" name="my_followed_tasks_template" domain="[('message_is_follower', '=', True)]" />
	           <separator/>
	           <filter string="Archived" name="inactive" domain="[('active','=',False)]"/>
	           <separator/>
	           <filter string="Parent task" name="parent_task_filter" domain="[('parent_id','=',None)]"/>
	           <group expand="0" string="Group By">
	               <filter string="Parent task" name="parent_task_groupby" context="{'group_by':'parent_id'}"/>
	           </group>
	        </search>
	    </field>
    </record>
  	<record id="project_task_template_action" model="ir.actions.act_window">
	    <field name="name">Task template</field>
	    <field name="type">ir.actions.act_window</field>
	    <field name="res_model">project.task.template</field>
	    <field name="context">{'search_default_parent_task_filter': 1}</field>
	    <field name="view_mode">tree,form</field>
	    <field name="help" type="html">
	      <p class="oe_view_nocontent_create">
	        Click to add a new task template.
	      </p><p>
	        Odoo helps you easily to manage your task template.
	      </p>
	    </field>
  	</record> 
  	
  <menuitem id="menu_project_task_template_form"
    action="project_task_template_action"
    name="Task template"
    groups="sales_team.group_sale_manager"
    sequence="2" parent="sale.menu_sale_config"/>
</odoo>